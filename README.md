# اسکریپت مهاجرت به PasarGuard

با یک دستور ساده ، از **Marzban** به **PasarGuard** مهاجرت کنید.  
این اسکریپت پوشه‌ها را تغییر نام میدهد، فایل‌های پیکربندی را بروزرسانی میکند و سرویس‌ها را راه‌اندازی میکند.

## 🚀 نصب و اجرا

برای اجرای مهاجرت از مرزبان به پاسارگارد ، دستور زیر را اجرا کنید:

```bash
bash <(curl -s https://raw.githubusercontent.com/mohmrzw/pasarguard-migration/main/migrate.sh)
````

یا با استفاده از wget:

```bash
bash <(wget -qO- https://raw.githubusercontent.com/mohmrzw/pasarguard-migration/main/migrate.sh)
```
---
## ⚙️ قبل از اجرای اسکریپت

قبل از اجرای فرآیند مهاجرت، لطفاً این مراحل را انجام دهید تا از بروز تداخل و خطا جلوگیری شود:

1. **⏹ توقف کامل Marzban:**
   ابتدا سرویس‌های مرزبان را خاموش کنید تا فایل‌ها و دیتابیس در حالت پایدار قرار بگیرند:

   ```bash
   cd /opt/marzban
   docker compose down
   ```

   ✅ با این کار، تمام کانتینرهای فعال مرزبان متوقف می‌شوند و مهاجرت بدون تداخل انجام خواهد شد.

2. **🧩 نصب پنل PasarGuard:**
   قبل از اجرای اسکریپت مهاجرت، باید پنل PasarGuard را نصب کرده باشید.
   آموزش کامل نصب را در ویدیوی زیر ببینید:

   [![آموزش کامل نصب پاسارگارد](https://img.youtube.com/vi/xWsSZSTqaqk/0.jpg)](https://www.youtube.com/watch?v=xWsSZSTqaqk&t=176s)

---

## ⚠️ نکات طلایی پیش از اجرای اسکریپت

* **💾 پشتیبان‌گیری:** همیشه قبل از مهاجرت از داده‌های Marzban خود یک بکاپ کامل تهیه کنید تا در صورت بروز مشکل، همه چیز قابل بازگشت باشد.
* **📂 مسیرهای پیش‌فرض:** اسکریپت مسیرهای `/opt/marzban` و `/var/lib/marzban` را استفاده می‌کند. اگر سرور شما مسیر متفاوت دارد، قبل از اجرا آن‌ها را تغییر دهید.
* **🔑 دسترسی root:** برخی عملیات نیاز به دسترسی ادمین دارند؛ ممکن است از شما رمز عبور درخواست شود.


## 🛠 کاری که این اسکریپت انجام می‌دهد

1. **⏹ توقف سرویس‌های Marzban**: تمامی کانتینرهای در حال اجرا متوقف می‌شوند.
2. **📁 تغییر نام پوشه‌ها**: پوشه‌های Marzban و دیتاها به PasarGuard تغییر نام پیدا می‌کنند.
3. **📝 بروزرسانی فایل‌های پیکربندی و `.env`**: مسیرها و درایورها به‌روز می‌شوند.
4. **🚀 راه‌اندازی سرویس‌ها**: سرویس‌های PasarGuard با Docker Compose بالا می‌آیند.
5. **🗄 انتقال دیتابیس MySQL** (در صورت استفاده): دیتابیس Marzban به PasarGuard منتقل می‌شود.
6. **🔧 بررسی وضعیت سرویس‌ها**: همه سرویس‌ها بررسی و اطمینان حاصل می‌شود که بدون مشکل اجرا می‌شوند.

---
## 🌐 ارتباط با من

برای پشتیبانی، آموزش‌ها و آخرین اخبار مهاجرت و PasarGuard:

* **تلگرام:** [https://t.me/mohmrzw](https://t.me/mohmrzw)
* **یوتیوب:** [https://www.youtube.com/@Mohmrzw](https://www.youtube.com/@Mohmrzw)
